# Task ID: 0
# Title: Establish Isolated, Secure Development Environment for Safe AI Testing
# Status: done
# Dependencies: None
# Priority: immediate
# Description: IMMEDIATE PRIORITY: Set up a fully isolated development environment to unblock all AI development work. This includes provisioning a separate Supabase project for development (no shared data or credentials with production), robust environment variable management to ensure strict separation between dev and prod, automated CI/CD deployment for the dev branch, a safe workflow for live AI interaction testing, and reliable database seeding/migration for development. The current dev Heroku app and dev.fridaysatfour.co are incorrectly connected to the PROD Supabaseâ€”this must be fixed to enable safe, three-dimensional personalization testing.
# Details:
1. Provision a new, dedicated Supabase project for development, ensuring no shared data or credentials with production. Update all dev infrastructure (Heroku app, Vercel deployment, FastAPI backend) to point to the isolated dev Supabase instance using environment variables.
2. Implement strict environment variable management: use .env files for local, Vercel/Heroku secrets for cloud, and document all required variables. Ensure no secrets are committed to version control. Dev and prod must have fully separate credentials and endpoints.
3. Automate environment setup using Docker Compose or similar tooling to guarantee consistency and reproducibility across developer machines and CI/CD. Use separate docker-compose configurations for dev and test environments as needed[2][5].
4. Integrate CI/CD pipelines (e.g., GitHub Actions) for the dev branch: automate linting, testing, and deployment to dev environments, and ensure all secrets are injected securely at build time. Dev branch must auto-deploy to dev infrastructure only.
5. Implement a safe AI testing workflow in the dev environment, ensuring no data or side effects reach production systems. Enable live testing of three-dimensional personalization features.
6. Set up database seeding and migration for the dev Supabase project. Use Supabase CLI and migrations to keep dev schema up to date and seed with safe, non-production data[1][3][4].
7. Configure monitoring and logging for the dev environment to track AI interactions and catch issues early, without leaking production data.
8. Document the full setup process and provide onboarding instructions for new developers, emphasizing the separation between dev and prod.
9. Enforce policy-based governance for third-party packages and dependencies to prevent vulnerabilities from entering the dev environment.
10. Regularly review and update the environment to reflect best practices for AI safety and compliance.

# Test Strategy:
- Verify that the dev environment uses a completely separate Supabase database and credentials from production by inspecting connection strings and running test queries.
- Confirm that environment variables are managed securely and not present in version control. Check that dev and prod use different secrets and endpoints.
- Run the full CI/CD pipeline for the dev branch: ensure automated tests, linting, and deployments execute successfully and only affect the dev environment.
- Perform live AI interaction tests in the dev environment and confirm no data or side effects reach production systems. Validate three-dimensional personalization features safely.
- Review monitoring/logging outputs to ensure all activity is isolated to dev and no sensitive production data is exposed.
- Onboard a new developer using the documentation and confirm they can set up and use the dev environment without accessing production resources.
- Run database migrations and seeding scripts on the dev Supabase project and confirm schema and data are correct and isolated from production.

# Subtasks:
## 211. Provision new Supabase project for development [done]
### Dependencies: None
### Description: Create a new Supabase project dedicated to development. Ensure no shared credentials or data with production. Update all dev infrastructure to use this new project.
### Details:


## 212. Update environment variable management for strict dev/prod separation [done]
### Dependencies: None
### Description: Audit and refactor environment variable usage. Ensure .env files (local) and cloud secrets (Heroku/Vercel) are set up for dev and prod separately. Document all required variables. Remove any production credentials from dev.
### Details:


## 213. Implement dev branch auto-deployment pipeline [done]
### Dependencies: None
### Description: Set up or update CI/CD (e.g., GitHub Actions) so that the dev branch auto-deploys to the dev Heroku app and dev.fridaysatfour.co, using only the dev Supabase project and secrets.
### Details:


## 214. Establish safe AI testing workflow in dev [done]
### Dependencies: None
### Description: Document and enforce a workflow for live AI interaction testing in the dev environment, ensuring no data or side effects reach production. Enable safe testing of three-dimensional personalization.
### Details:


## 215. Set up database seeding and migration for dev Supabase [done]
### Dependencies: None
### Description: Configure Supabase CLI migrations and seeding for the dev project. Ensure schema and seed data are reproducible and isolated from production. Document the process for future updates.
### Details:


